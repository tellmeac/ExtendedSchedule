@startuml Containers

!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Component.puml

Person(user, User, "Student or teacher")

System_Boundary(api, "Extended Schedule") {
    Container(spa, "SPA", "Vue3/TypeScript")

    Container(ExtendedSchedule, "Settings Service", "Go", "Works with configuration and provides schedule")

    ContainerDb(db, "Postgres", "SQL Database", "Stores user configuration")

    Rel(spa, ExtendedSchedule, "Uses", "JSON/HTTPS")
    Rel(spa, ExtendedSchedule, "Uses", "JSON/HTTPS")

    Rel(ExtendedSchedule, db, "Uses")
}

System_Ext(oauth, "OAuth2 Google", "External OAuth2 provider")
System_Ext(scheduleProvider, "Schedule Source", "Base schedule provider")

Rel(user, spa, "Uses", "HTTPS")

Rel_R(ExtendedSchedule, oauth, "Authorizes requests with", "HTTPS")
Rel_R(spa, oauth, "Receives access token", "HTTPS")

Rel(ExtendedSchedule, scheduleProvider, "Uses", "JSON/HTTPS")

@enduml
