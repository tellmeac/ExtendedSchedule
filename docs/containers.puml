@startuml Containers

!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Component.puml

Person(user, User, "Student or Teacher")

System_Boundary(api, "Extended Schedule") {
    Container(spa, "Web Application", "TypeScript/React")

    Container(UserConfig, "Settings Service", "Go", "Works with configuration")
    Container(ScheduleService, "Schedule Service", "Go", "Provides schedule and related information")

    ContainerDb(db, "Database", "SQL Database", "Stores user configuration")

    Rel(ScheduleService, UserConfig, "Uses", "gRPS")

    Rel(spa, UserConfig, "Uses", "JSON/HTTPS")
    Rel(spa, ScheduleService, "Uses", "JSON/HTTPS")

    Rel(UserConfig, db, "Uses")
}

System_Ext(oauth, "OAuth2 Google", "External OAuth2 provider")
System_Ext(scheduleProvider, "Schedule Source", "Base schedule provider")

Rel(user, spa, "Uses", "HTTPS")

Rel_R(UserConfig, oauth, "Authorizes requests with", "HTTPS")
Rel_R(ScheduleService, oauth, "Authorizes requests with", "HTTPS")
Rel_R(spa, oauth, "Receives access token", "HTTPS")

Rel(UserConfig, scheduleProvider, "Uses", "JSON/HTTPS")

@enduml